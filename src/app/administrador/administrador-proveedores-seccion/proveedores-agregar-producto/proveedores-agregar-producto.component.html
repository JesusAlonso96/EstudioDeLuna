<app-barra-cargando [cargando]="cargando"></app-barra-cargando>
<div class="container margin-top mb-4">
    <div class="row">
        <div class="col-lg-12 mx-auto">
            <mat-card>
                <form #productoForm="ngForm">
                    <h3 class="text-center">Agregar nuevo producto</h3>
                    <hr>
                    <div class="row">
                        <div class="col-lg-6">
                            <mat-form-field class="full-width input" appearance="outline">
                                <mat-label>Proveedor</mat-label>
                                <input type="text" placeholder="Proveedor" matInput [formControl]="controlador"
                                    [matAutocomplete]="auto" required>
                                <mat-autocomplete #auto="matAutocomplete" [displayWith]="mostrarProveedor">
                                    <mat-option *ngFor="let opcion of opcionesFiltradas | async" [value]="opcion">
                                        {{opcion.nombre}}
                                    </mat-option>
                                    
                                </mat-autocomplete>
                            </mat-form-field>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-12">
                            <h5>Detalles del producto</h5>
                            <hr>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-6">
                            <div class="row">
                                <div class="col-lg-6">
                                    <mat-form-field class="full-width input" appearance="outline">
                                        <mat-label>Nombre del producto</mat-label>
                                        <input matInput placeholder="Ingresa el nombre del producto"
                                            [(ngModel)]="producto.nombre" #nombre="ngModel" name="nombre" required>
                                        <mat-error
                                            *ngIf="nombre.invalid && (nombre.dirty || nombre.touched) && nombre.errors.required">
                                            Por favor, ingresa el nombre del producto
                                        </mat-error>
                                    </mat-form-field>
                                </div>
                                <div class="col-lg-6">
                                    <mat-form-field class="full-width input" appearance="outline">
                                        <mat-label>Codigo de barra</mat-label>
                                        <input matInput placeholder="Ingresa el nombre del producto"
                                            [(ngModel)]="producto.codigoBarras" #codigoBarras="ngModel"
                                            name="codigoBarras" required>
                                        <mat-error
                                            *ngIf="codigoBarras.invalid && (codigoBarras.dirty || codigoBarras.touched) && codigoBarras.errors.required">
                                            Por favor, ingresa el codigo del producto
                                        </mat-error>
                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-12">
                                    <mat-form-field class="full-width input" appearance="outline">
                                        <mat-label>Costo del producto</mat-label>
                                        <input type="number" matInput placeholder="Ingresa el costo del producto"
                                            [(ngModel)]="producto.costo" #costo="ngModel" name="costo" required>
                                        <mat-error
                                            *ngIf="costo.invalid && (costo.dirty || costo.touched) && costo.errors.required">
                                            Por favor, ingresa el costo del producto
                                        </mat-error>
                                    </mat-form-field>

                                </div>
                            </div>

                        </div>
                        <div class="col-lg-6">
                            <mat-form-field class="full-width input" appearance="outline">
                                <mat-label>Detalles del producto</mat-label>
                                <textarea matInput [(ngModel)]="producto.detalles" #detalles="ngModel" name="detalles"
                                    cols="6" rows="6" required></textarea>
                                <mat-error
                                    *ngIf="detalles.invalid && (detalles.dirty || detalles.touched) && detalles.errors.required">
                                    Por favor, ingresa la descripcion del producto
                                </mat-error>
                            </mat-form-field>
                        </div>
                        <div class="col-lg-12">
                            <button mat-raised-button color="accent" class="float-right"
                                [disabled]="!productoForm.valid" (click)="agregarProducto(productoForm)">Agregar
                                producto</button>
                        </div>
                    </div>
                </form>
            </mat-card>
        </div>
    </div>
</div>